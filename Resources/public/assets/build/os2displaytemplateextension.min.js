/**
 * @name Os2displaytemplateextensionBundle
 * @version v1.1.2
 * @link https://github.com/itk-os2display/template-extension-bundle
 */
angular.module("templateExtensionModule",["ngQuill"]),angular.module("templateExtensionModule").config(["ngQuillConfigProvider",function(e){e.set({formats:["bold","italic","header","list"]})}]),angular.module("templateExtensionModule").directive("itkRichText",[function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",tool:"="},link:function(t){t.tools={italics:!0,bold:!0,h1:!0,h2:!0,list_bullet:!0,list_ordered:!0,clean:!0},t.tool.config&&t.tool.config.tools&&(t.tools=Object.assign(t.tools,t.tool.config.tools)),t.fontsizeEnabled=void 0===t.tool.config||t.tool.config.fontsize_enabled,t.availableFontSizes=[{name:"Lille",value:8},{name:"Normal",value:16},{name:"Stor",value:24},{name:"Meget stor",value:32}],t.editorCreated=function(e){e.clipboard.dangerouslyPasteHTML(t.slide.options.text)}},templateUrl:"/bundles/os2displaytemplateextension/apps/templateExtensionModule/itk-rich-text.html"}}]),angular.module("templateExtensionModule").directive("itkTextArray",["$timeout",function(e){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},link:function(t,e,i){t.newText={text:"",author:""},t.addText=function(){t.slide.options.texts||(t.slide.options.texts=[]),t.slide.options.texts.push(angular.copy(t.newText))},t.removeText=function(e){t.slide.options.texts.splice(e,1)}},templateUrl:"/bundles/os2displaytemplateextension/apps/templateExtensionModule/itk-text-array.html"}}]),angular.module("templateExtensionModule").directive("itkColorPicker",["$timeout","$http",function(t,e){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",tool:"="},link:function(i){i.selectColor=function(e,t){i.slide.options[e]=t.value},i.themes=[],i.fields=i.tool.config.fields,e.get("/api/itk_template_extension/theme_colors").then(function(e){t(function(){i.themes=e.data})})},templateUrl:"/bundles/os2displaytemplateextension/apps/templateExtensionModule/itk-color-picker.html"}}]),angular.module("templateExtensionModule").directive("itkMediaPicker",["mediaFactory","$timeout",function(i,e){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",tool:"="},link:function(s){var e=s.tool.config,a=null;function d(e){for(var t=[],i=e.length-1;0<=i;i--){var l=!1,o=null;for(o in s.fields)s.fields.hasOwnProperty(o)&&(o=s.fields[o],s.slide.options[o.field]===i&&(t.push(e[i]),l=!0));if(!l)for(o in e.splice(i,1),s.fields)s.fields.hasOwnProperty(o)&&(o=s.fields[o],s.slide.options[o.field]>i&&(s.slide.options[o.field]=s.slide.options[o.field]-1))}}s.fields=e.fields,s.step=null,s.selectedMedia=[],s.selectedMediaType=null,s.removeMedia=function(e){s.slide.options[e]=null,d(s.slide.media)},s.backgroundPicker=function(e,t){a=e,s.selectedMediaType=t||"image",s.step="background-picker"},s.pickFromMedia=function(){var e=s.slide.options[a];""!==e&&null!=e&&(s.selectedMedia=[s.slide.media[e]]),s.step="pick-from-media"},s.pickFromComputer=function(){s.step="pick-from-computer"},s.back=function(){s.selectedMedia=[],s.step=null,a=null};s.$on("mediaOverview.selectMedia",function(e,t){!function(e){var t=[],i=!1,l=null;for(var o in s.slide.media){var n=s.slide.media[o];n.id===e.id&&(i=!0,l=parseInt(o)),t.push(n)}i||(t.push(e),l=t.length-1),s.slide.options[a]=l,d(t),s.step=null,s.slide.media=t}(t)}),s.$on("mediaUpload.uploadSuccess",function(e,t){i.getMedia(t.id).then(function(e){s.slide.media.push(e),s.slide.options[a]=s.slide.media.length-1},function(e){busService.$emit("log.error",{cause:e,msg:"Kunne ikke tilf√∏je media."})})})},templateUrl:"/bundles/os2displaytemplateextension/apps/templateExtensionModule/itk-media-picker.html"}}]);